<!DOCTYPE html>
<html>
<head>
    <title>CYOAIdventure</title>
    <meta charset="utf-8">
</head>
<body>
    <h1>Frontpage for dev work</h1>
    <p>List of stories and of games in progress. The current time is {{.Timestamp}}.</p>

    {{- $strIdKey  := .StoryIdKey -}}
    {{- $editURI   := .EditStoryURI -}}
    {{- $ngamURI   := .CreateStoryURI -}}
    {{- $playURI   := .PlayStoryURI -}}
    {{- $deleteURI := .DeleteStoryURI -}}
    {{- $gameIdKey := .GameIdKey -}}

    <h1>Stories</h1>
      <a href="{{$editURI}}">Create New</a><br /><br />
      {{ range $str  := .Stories }}
      <details>
        <summary>
	  {{ $str.Title }}
	  <a href="{{$ngamURI}}?{{$strIdKey}}={{$str.Id}}">Playthrough</a>
	  <a href="{{$editURI}}?{{$strIdKey}}={{$str.Id}}">Edit</a>
	  <a href="{{$deleteURI}}?{{$strIdKey}}={{$str.Id}}">Delete</a>
	</summary>
	{{ $str.Description }}
      </details>
      {{ end }}

    <h1>Games</h1>
      <ul>
      {{ range $gam := .Games }}
      <li>
	  {{ $gam.Title }} : 
	  <a href="{{$playURI}}?{{$gameIdKey}}={{$gam.Id}}">Play</a>
      </li>
      {{ end }}
      </ul>

</body>
</html>
